<?php
function bindIP($clntIP, $serverIP) {
	$ip = "localhost";
	$port = 2107;

	$sock = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
	if ($sock == false) {
		echo "socket_create error\n";
	}

	socket_connect($sock, $ip, $port);

	$msg = socket_read($sock, 128);

	$msg = "APP_CLIENT";
	socket_write($sock, $msg, strlen($msg));
	$msg = socket_read($sock, 128);

	$msg = 'B'.$clntIP.'#'.$serverIP;
	socket_write($sock, $msg, strlen($msg));

	$msg = socket_read($sock, (int) $lenStr);
	return $msg;
}


if (isset($_POST["target"])) {
	$client = $_SERVER['REMOTE_ADDR'];
	$server = htmlspecialchars($_POST["target"])
	$msg = bindIP($client, $server);
	
}
?>
